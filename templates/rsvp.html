{% extends 'base.html' %}
{% block title %}RSVP Chef’s Table{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/survey.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/rsvp.css') }}">
{% endblock %}

{% block body %}
<div class="page-container full-screen">
  <!-- Note the 'rsvp-wizard' helper class on the card -->
  <div class="wizard-card rsvp-wizard">

    <!-- HEADER -->
    <div class="wizard-header">
      <h1 class="wizard-title">amori RSVP</h1>
      <div class="wizard-subtitle">
        Zostávajúce miesta: <strong>{{ seats }}</strong>
      </div>
    </div>

    <!-- SINGLE STEP: name entry -->
    <div class="step active" data-step="1">
      <p class="question-text">Ako sa voláš?</p>
      <div class="options-container">
        <form id="rsvp-form"
              action="{{ url_for('rsvp') }}"
              method="POST"
              style="width:100%;">
          <input
            name="name"
            id="rsvp-name"
            type="text"
            class="rsvp-input"
            placeholder="Zadaj svoje meno"
            {% if seats == 0 %}disabled{% endif %}
            required
            autofocus
          >
        </form>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="bottom-bar">
      <div class="wizard-footer">
        <button
          type="submit"
          form="rsvp-form"
          id="rsvp-next"
          class="next"
          {% if seats == 0 %}disabled{% endif %}
        >Ďalej</button>
      </div>
    </div>

    {% if seats == 0 %}
    <div class="wizard-note">
      <em>Prepáč, momentálne sme plne obsadení!</em>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  (function() {
    const input = document.getElementById('rsvp-name');
    const btn   = document.getElementById('rsvp-next');
    // only wire up the “enable when non-empty” behavior if seats remain
    {% if seats > 0 %}
    input.addEventListener('input', () => {
      btn.disabled = input.value.trim() === '';
    });
    {% endif %}
  })();
</script>
{% endblock %}
